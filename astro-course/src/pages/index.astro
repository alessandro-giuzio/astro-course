---
import { getCollection } from 'astro:content';

import Layout from '../layouts/Layout.astro';
import Main from '../components/Main.astro';
import H1 from '../components/H1.astro';
import FeaturedPost from '../components/FeaturedPost.astro';
//querying all posts
const allPosts = await getCollection('posts');
//querying and filter featured posts
const featuredPosts = allPosts.filter(post => post.data.featured);
// getting the rest of the posts
const posts = allPosts.filter(post => !post.data.featured).slice(0, 4);
---

<Layout title='Welcome to Astro.'>
  <Main>
    <H1 text='Alessandro Blog' />
    <p class='text-zinc-900 font-2xl mb-24 max-sm:mb-14'>
      Lorem ipsum dolor sit amet, consectetur adipisicing.
    </p>
    {featuredPosts.map(post => <FeaturedPost post={post} />)}
    <hr class='w-full border border-teal-900 mb-16 max-sm:mb-10' />
  </Main>
</Layout>
